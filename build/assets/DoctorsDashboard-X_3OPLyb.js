import{r as s,j as e,a as E}from"./index-C8N-Qaqw.js";import{N as b}from"./NavBar-DrSRVsRg.js";/* empty css                       */import"./react-toastify.esm-Cs-6VpAC.js";/* empty css                      */import{a as F,F as L,S as R,C as k,b as K}from"./Footer-DouE2vrc.js";import{s as v}from"./SupaBase-hXybzm9P.js";import{R as g,B as Y,C as N,X as w,Y as y,T as S,L as D,a as C,b as A,c as P}from"./BarChart-BcF2QDe2.js";/* empty css                      *//* empty css               */import"./createSvgIcon-UnPMeLsY.js";const B=()=>{const[i,m]=s.useState(0),[p,x]=s.useState(0),[u,d]=s.useState(!0);return s.useEffect(()=>{(async()=>{try{const{count:r,error:l}=await v.from("patientsdata").select("*",{count:"exact",head:!0});if(l)throw l;m(r||0),console.log("Total Patients:",r);const{count:h,error:t}=await v.from("DoctorsData").select("*",{count:"exact",head:!0});if(t)throw t;x(h||0),console.log("Total Doctors:",h)}catch(r){console.error("Error fetching total patients:",r)}finally{d(!1)}})()},[]),e.jsx("div",{children:e.jsxs("div",{className:"widget-containers",children:[e.jsxs("div",{className:"widget-headings",children:[e.jsx("h1",{children:"Doctors"}),e.jsx("p",{children:"Hospital doctor Dashboard Template"})]}),e.jsxs("div",{className:"widgets",children:[e.jsxs("div",{className:" widg-11",onClick:()=>handleClick("/patients"),children:[e.jsxs("div",{className:"patients",children:[e.jsx("h3",{children:"Total Patients"}),e.jsxs("h1",{children:[i," ",e.jsx(F,{fontSize:"large"})]})]}),e.jsx("div",{className:"icon",children:e.jsx(L,{fontSize:"large"})})]}),e.jsxs("div",{className:" widg-33",children:[e.jsxs("div",{className:"patient",children:[e.jsx("h3",{children:"Appointment"}),e.jsxs("h1",{children:["76",e.jsx(R,{style:{transform:"rotate(70deg)"},fontSize:"large"})," "]})]}),e.jsx("div",{className:"icon",children:e.jsx(k,{fontSize:"large"})})]})]})]})})},M=()=>{const[i,m]=s.useState("2024"),[p,x]=s.useState([]),[u,d]=s.useState(!0),f=["2022","2023","2024","2025","2026"],r=t=>{m(t.target.value)},l=[{name:"Jan",uv:4e3,pv:2400},{name:"Feb",uv:3e3,pv:140},{name:"Mar",uv:2e3,pv:9800},{name:"Apr",uv:2780,pv:3908},{name:"May",uv:1890,pv:4800},{name:"June",uv:2390,pv:3800},{name:"July",uv:3490,pv:4300}],h=(t,a)=>{let n="";return a==="uv"?n="Recovered Patients":a==="pv"&&(n="New Patients"),[t,n]};return s.useEffect(()=>{(async()=>{d(!0);try{const{data:a,error:n}=await v.from("patientsdata").select("created_at, Status");if(n)throw n;const T=a.filter(o=>new Date(o.created_at).getFullYear().toString()===i),j=Array(12).fill(0).map((o,c)=>({name:new Date(0,c).toLocaleString("default",{month:"short"}),uv:0,pv:0}));T.forEach(o=>{const c=new Date(o.created_at).getMonth();o.Status==="recovered"?j[c].uv+=1:o.Status==="new"&&(j[c].pv+=1)}),x(j)}catch(a){console.error("Error fetching chart data:",a)}finally{d(!1)}})()},[i]),e.jsxs("div",{className:"chart",children:[e.jsxs("div",{className:"chart-2",children:[e.jsxs("div",{className:"main-heading",children:[e.jsx("div",{className:"heading",children:e.jsx("h3",{children:"Patient Statistics"})}),e.jsx("div",{className:"year-dropdown",children:e.jsx("select",{value:i,onChange:r,className:"custom-dropdown",children:f.map(t=>e.jsx("option",{value:t,children:t},t))})})]}),u?e.jsx("p",{children:"Loading..."}):e.jsx(g,{width:"100%",height:400,children:e.jsxs(Y,{data:p,children:[e.jsx(N,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"name"}),e.jsx(y,{}),e.jsx(S,{formatter:(t,a)=>[t,a==="uv"?"Recovered Patients":"New Patients"]}),e.jsx(D,{}),e.jsx(C,{dataKey:"pv",fill:"#D45BFF",name:"New Patients"}),e.jsx(C,{dataKey:"uv",fill:"#369DC9",name:"Recovered Patients"})]})})]}),e.jsxs("div",{className:"chart-1",children:[e.jsxs("div",{className:"main-heading",children:[e.jsx("div",{className:"heading",children:e.jsx("h3",{children:"Patient Statistics"})}),e.jsxs("div",{className:"months",children:[e.jsx("p",{children:"Monthly"}),e.jsx("p",{children:"Weekly"}),e.jsx("p",{children:"Today"})]})]}),e.jsx(g,{width:"100%",height:400,children:e.jsxs(A,{data:l,children:[e.jsx(N,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"name"}),e.jsx(y,{}),e.jsx(S,{formatter:h}),e.jsx(D,{}),e.jsx(P,{type:"monotone",dataKey:"pv",stroke:"green",name:"New Patients"}),e.jsx(P,{type:"monotone",dataKey:"uv",stroke:"red",name:"Recovered Patients"})]})})]})]})},U=()=>(E(),e.jsxs("div",{className:"container",children:[e.jsx(b,{}),e.jsxs("div",{className:"main-content",children:[e.jsx("div",{className:"doctordashboard"}),e.jsxs("div",{className:"homeinfo",children:[e.jsx(B,{}),e.jsx(M,{})]})]}),e.jsx(K,{})]}));export{U as default};
