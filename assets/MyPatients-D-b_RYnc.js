import{r as t,j as s}from"./index-C8N-Qaqw.js";import{s as u}from"./SupaBase-hXybzm9P.js";import{N as v}from"./NavBar-DrSRVsRg.js";/* empty css                       */import"./react-toastify.esm-Cs-6VpAC.js";/* empty css                      *//* empty css               */import"./createSvgIcon-UnPMeLsY.js";const z=()=>{var c;const[a,l]=t.useState([]),[n,o]=t.useState(null),[d,p]=t.useState(!0),[m,h]=t.useState(null);t.useEffect(()=>{const e=setTimeout(()=>{p(!1)},2e3);return()=>clearTimeout(e)},[]);const i=JSON.parse(localStorage.getItem("doctorData")),r=(c=i==null?void 0:i.Designation)==null?void 0:c.trim();return t.useEffect(()=>{if(!r){h(null),o("Doctor data is missing. Please login again.");return}(async()=>{const{data:g,error:f}=await u.from("patientsdata").select("*").eq("visited",!0);if(f)o("Error fetching patient data.");else{const x=g.filter(j=>j.specialization===r);l(x)}})()},[r]),s.jsxs("div",{className:"my-patients",children:[s.jsx(v,{profileImage:m}),s.jsx("h1",{children:"My Patients"}),d?s.jsxs("div",{className:"loading",children:[s.jsx("p",{children:"Loading patients..."}),s.jsx("img",{src:"https://media.giphy.com/media/swhRkVYLJDrCE/giphy.gif?cid=ecf05e47l2mubft6j3ziu9t1qbgvfkfngodcfrx0efthlwlz&ep=v1_gifs_search&rid=giphy.gif&ct=g",alt:"Loading..."})]}):n?s.jsxs("p",{className:"error-message",children:["Error: ",n]}):a.length===0?s.jsx("p",{className:"no-appointments",children:"No patients found who have visited."}):s.jsx("div",{className:"patients-list",children:a.map(e=>s.jsxs("div",{className:"patient-cards",children:[s.jsxs("div",{className:"patient-head",children:[s.jsx("h2",{children:e.name}),s.jsxs("p",{children:[s.jsx("strong",{children:"OP:"})," ",e.joining_date]})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Patient Id:"})," ",e.id]}),s.jsxs("div",{className:"blood-group",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Gender:"})," ",e.Gender]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Blood Group:"})," ",e.Blood_Group]})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"prescription:"})," ",e.prescription]})]},e.id))})]})};export{z as default};
