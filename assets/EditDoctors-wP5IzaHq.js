import{a as N,u as b,r as s,j as e}from"./index-C8N-Qaqw.js";import{s as h}from"./SupaBase-hXybzm9P.js";const v=()=>{const{id:i}=N(),c=b(),[l,u]=s.useState(""),[n,f]=s.useState(""),[m,g]=s.useState(""),[p,a]=s.useState(""),D=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"],x=async t=>{t.preventDefault(),a("");const o={};if(l.trim()&&(o.name=l.trim()),n.trim()&&(o.Designation=n.trim()),m.trim()&&(o.Degree=m.trim()),Object.keys(o).length===0){a("Please modify at least one field before submitting.");return}try{const{data:r,error:d}=await h.from("DoctorsData").update(o).eq("id",Number(i)).select();d?(console.error("Error while updating:",d),a(`Submission error: ${d.message}`)):r&&r.length>0?(a(null),c("/admin/doctors")):a("No doctor data was updated. Please check your input.")}catch(r){console.error("Unexpected error:",r),a(`Error: ${r.message}`)}};return s.useEffect(()=>{(async()=>{const{data:o,error:r}=await h.from("DoctorsData").select().eq("id",i).single();r?(console.error(r),a("Doctor data could not be fetched."),c("/admin/doctors",{replace:!0})):(console.log("Fetched doctor:",o),o&&(u(o.name),f(o.Designation)))})()},[i,c]),e.jsxs("div",{className:"doctor-edit-container",children:[e.jsx("h1",{className:"doctor-edit-title",children:"Edit Doctor"}),e.jsxs("form",{className:"doctor-edit-form",onSubmit:x,children:[e.jsx("label",{className:"form-label",htmlFor:"DoctorName",children:"Doctor Name"}),e.jsx("input",{className:"form-input",type:"text",id:"DoctorName",value:l,onChange:t=>u(t.target.value)}),e.jsx("label",{className:"form-label",htmlFor:"Specialization",children:"Specialization"}),e.jsxs("select",{className:"form-input",id:"Specialization",value:n,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"",children:"Select Specialization"}),D.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("label",{className:"form-label",htmlFor:"Experience",children:"Degree"}),e.jsx("input",{className:"form-input",type:"text",id:"Degree",value:m,onChange:t=>g(t.target.value)}),e.jsx("button",{className:"form-submit-button",type:"submit",children:"Update Details"}),p&&e.jsx("p",{className:"form-error",children:p})]})]})};export{v as default};
