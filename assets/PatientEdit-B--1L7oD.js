import{a as G,u as _,r as s,j as t}from"./index-C8N-Qaqw.js";import{s as C}from"./SupaBase-hXybzm9P.js";const w=()=>{const{id:o}=G(),r=_(),[c,N]=s.useState(""),[m,x]=s.useState(""),[u,j]=s.useState(""),[d,g]=s.useState(""),[p,b]=s.useState(""),[h,S]=s.useState(""),[n,v]=s.useState(""),[f,D]=s.useState(""),[y,l]=s.useState(""),P=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"],E=["Male","Female"],F=["Emergency","Normal"];s.useEffect(()=>{if(!n){const e=`HB${Math.floor(1e3+Math.random()*9e3)}`;v(e)}},[n]);const z=async e=>{if(e.preventDefault(),l(""),!c||!m||!u||!d||!p||!h||!n||!f){l("Please fill out all fields correctly.");return}try{const{data:a,error:i}=await C.from("patientsdata").update({doctor_name:c.trim(),name:m.trim(),Gender:u,disease:d.trim(),joining_date:p,specialization:h.trim(),consultation_number:n,Status:f}).eq("id",Number(o)).select();i?l(`Submission error: ${i.message}`):a&&a.length>0?(l(null),r("/admin/patients")):l("No patient data was updated, please check your input.")}catch(a){l(`Error: ${a.message}`)}};return s.useEffect(()=>{(async()=>{const{data:a,error:i}=await C.from("patientsdata").select().eq("id",o).single();i?(r("/patients",{replace:!0}),l("Patient data could not be fetched.")):a&&(N(a.doctor_name),x(a.name),j(a.Gender),g(a.disease),b(a.joining_date),S(a.specialization),v(a.consultation_number||`HB${Math.floor(1e3+Math.random()*9e3)}`),D(a.Status))})()},[o,r]),t.jsxs("div",{className:"patient-edit-container",children:[t.jsx("h1",{className:"patient-edit-title",children:"Edit Patient"}),t.jsxs("form",{className:"patient-edit-form",onSubmit:z,children:[t.jsx("label",{className:"form-label",htmlFor:"DoctorName",children:"Doctor Name"}),t.jsx("input",{className:"form-input",type:"text",id:"DoctorName",value:c,onChange:e=>N(e.target.value)}),t.jsx("label",{className:"form-label",htmlFor:"PatientName",children:"Patient Name"}),t.jsx("input",{className:"form-input",type:"text",id:"PatientName",value:m,onChange:e=>x(e.target.value)}),t.jsx("label",{className:"form-label",htmlFor:"Gender",children:"Gender"}),t.jsxs("select",{className:"form-input",id:"Gender",value:u,onChange:e=>j(e.target.value),children:[t.jsx("option",{value:"",children:"Select Gender"}),E.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("label",{className:"form-label",htmlFor:"Disease",children:"Disease"}),t.jsx("input",{className:"form-input",type:"text",id:"Disease",value:d,onChange:e=>g(e.target.value)}),t.jsx("label",{className:"form-label",htmlFor:"JoiningDate",children:"OP"}),t.jsx("input",{className:"form-input",type:"date",id:"JoiningDate",value:p,onChange:e=>b(e.target.value)}),t.jsx("label",{className:"form-label",htmlFor:"Specialization",children:"Specialization"}),t.jsxs("select",{className:"form-input",id:"Specialization",value:h,onChange:e=>S(e.target.value),children:[t.jsx("option",{value:"",children:"Select Specialization"}),P.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("label",{className:"form-label",htmlFor:"ConsultNo",children:"Consultation No."}),t.jsx("input",{className:"form-input",type:"text",id:"ConsultNo",value:n,disabled:!0}),t.jsx("label",{className:"form-label",htmlFor:"Status",children:"Status"}),t.jsxs("select",{className:"form-input",id:"Status",value:f,onChange:e=>D(e.target.value),children:[t.jsx("option",{value:"",children:"Select Status"}),F.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("button",{className:"form-submit-button",type:"submit",children:"Update Details"}),y&&t.jsx("p",{className:"form-error",children:y})]})]})};export{w as default};
