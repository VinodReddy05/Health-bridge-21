import{u as _,r as a,j as e}from"./index-CEwMMO6D.js";import{s as M}from"./SupaBase-DdafNSpo.js";import{e as A}from"./index-DpmFZVTh.js";import{Q as G,B as n}from"./react-toastify.esm-CPfoCFDA.js";/* empty css                      */const T=()=>{const g=_(),[p,x]=a.useState(""),[i,j]=a.useState(""),[o,f]=a.useState(""),[l,v]=a.useState(""),[u,S]=a.useState(""),[c,N]=a.useState(""),[d,b]=a.useState(""),[m,y]=a.useState(""),[r,D]=a.useState(""),[h,C]=a.useState(""),P=a.useRef(),E=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"],F=()=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*",s=Array.from({length:6},()=>t[Math.floor(Math.random()*t.length)]).join("");x(s)};a.useEffect(()=>{(()=>{const s=`HB${Math.floor(1e3+Math.random()*9e3)}`;b(s)})()},[]),a.useEffect(()=>{r&&F()},[r]);const q=async t=>{t.preventDefault(),(!i||!o||!l||!u||!c||!r||!d||!h||!m)&&n.error("Please fill out all fields correctly.");try{const{data:s,error:z}=await M.from("patientsdata").insert([{doctor_name:i.trim(),name:o.trim(),Gender:l,disease:u.trim(),joining_date:c,email_id:r,consultation_number:d,specialization:m,Status:h,password:p}]);n.success("Successfully added patient details"),z?n.error("Submission error:"):(w(),setTimeout(()=>{g("/admin/patients")},1500))}catch(s){console.error("Unexpected error during form submission:",s),n.error("Unexpected error occurred. Please try again.")}},w=()=>{const t={to_email:r,name:o,message:`Welcome! Here is your generated password: ${p}`};A.send("service_bij7amq","template_2qsut27",t,"oNdVP1DnDdfn_f0zA").then(s=>{n.success("Email sent successfully"),console.log("Email sent successfully:",s)},s=>{n.error("Failed to send email. Please check your EmailJS configuration.")})};return e.jsxs("div",{className:"patientDetail",children:[e.jsx("h2",{children:"Add Patient Details"}),e.jsxs("form",{ref:P,onSubmit:q,children:[e.jsx("label",{htmlFor:"DoctorName",children:"Doctor Name"}),e.jsx("input",{type:"text",id:"DoctorName",value:i,onChange:t=>j(t.target.value),required:!0}),e.jsx("label",{htmlFor:"PatientName",children:"Patient Name"}),e.jsx("input",{type:"text",id:"PatientName",value:o,onChange:t=>f(t.target.value),required:!0}),e.jsx("label",{htmlFor:"gender",children:"Gender"}),e.jsxs("select",{id:"gender",value:l,onChange:t=>v(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),e.jsx("label",{htmlFor:"Disease",children:"Disease"}),e.jsx("input",{type:"text",id:"Disease",value:u,onChange:t=>S(t.target.value),required:!0}),e.jsx("label",{htmlFor:"JoiningDate",children:"OP"}),e.jsx("input",{type:"date",id:"JoiningDate",value:c,onChange:t=>N(t.target.value),required:!0}),e.jsx("label",{htmlFor:"specialization",children:"Specialization"}),e.jsxs("select",{id:"specialization",value:m,onChange:t=>y(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Specialization"}),E.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:r,onChange:t=>D(t.target.value),required:!0}),e.jsx("label",{htmlFor:"ConsultNo",children:"Consultation No."}),e.jsx("input",{type:"text",id:"ConsultNo",value:d,disabled:!0}),e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",value:h,onChange:t=>C(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Emergency",children:"Emergency"}),e.jsx("option",{value:"Normal",children:"Normal"})]}),e.jsx("button",{type:"submit",children:"Submit"})]}),e.jsx(G,{})]})};export{T as default};
