import{u as T,r as s,j as e}from"./index-C8N-Qaqw.js";import{s as q}from"./SupaBase-hXybzm9P.js";import{e as A}from"./index-DpmFZVTh.js";/* empty css               */import{B as a}from"./react-toastify.esm-Cs-6VpAC.js";import C from"./SideBar-BtIhLzOV.js";import"./Close-7U1X-oMm.js";import"./createSvgIcon-UnPMeLsY.js";/* empty css                      */const H=()=>{const v=T(),[i,y]=s.useState(""),[l,b]=s.useState(""),[m,D]=s.useState(""),[c,S]=s.useState(""),[o,E]=s.useState(""),[d,N]=s.useState(""),[g,n]=s.useState("");s.useState(!1);const f=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"],F=()=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*",r=Array.from({length:6},()=>t[Math.floor(Math.random()*t.length)]).join("");N(r)};s.useEffect(()=>{o&&F()},[o]);const P=async t=>{t.preventDefault(),console.log("Form submitted"),console.log("Doctor Name:",i),console.log("Designation:",l),console.log("Info:",m),console.log("Rating:",c),console.log("Email:",o),n("");const r=i.trim(),h=l.trim(),p=m.trim(),x=Number(c.trim());if(!r||!h||!p||isNaN(x)||!o){n("Please fill out all fields correctly, including a valid email and rating.");return}try{const{data:j,error:u}=await q.from("DoctorsData").insert([{name:r,Designation:h,info:p,rating:x,email_id:o,password:d}]);u?(console.error("Insert error:",u),n(`There was an issue submitting the form: ${u.message}`)):(setTimeout(()=>{a.success("Successfully added Doctor details")},1500),w(),setTimeout(()=>{v("/admin/doctors")},2500))}catch(j){console.error("Error during form submission:",j),setTimeout(()=>{a.error("Unexpected error occurred. Please try again.")},500),n("Unexpected error occurred. Please try again.")}},w=()=>{console.log("Attempting to send email..."),setTimeout(()=>{a.info("Attempting to send email...")},500);const t={to_email:o,name:i,message:`Welcome! Here is your generated password: ${d}`};A.send("service_bij7amq","template_2qsut27",t,"oNdVP1DnDdfn_f0zA").then(r=>{console.log("Email sent successfully:",r),setTimeout(()=>{a.success("Email sent successfully")},1e3)},r=>{console.error("Failed to send email:",r),setTimeout(()=>{a.error("Failed to send email. Please check your EmailJS configuration.")},1e3)})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsxs("div",{className:"page-create",children:[e.jsx("h1",{children:"Add Doctor"}),e.jsxs("form",{onSubmit:P,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",value:i,onChange:t=>y(t.target.value),required:!0}),e.jsx("label",{htmlFor:"designation",children:"Designation"}),e.jsxs("select",{id:"specializations",value:l,onChange:t=>b(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Designation"}),f&&f.map((t,r)=>e.jsx("option",{value:t,children:t},r))]}),e.jsx("label",{htmlFor:"info",children:"Info"}),e.jsx("textarea",{id:"info",value:m,onChange:t=>D(t.target.value),required:!0}),e.jsx("label",{htmlFor:"rating",children:"Rating"}),e.jsx("input",{type:"number",id:"rating",value:c,onChange:t=>S(t.target.value),required:!0}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:o,onChange:t=>E(t.target.value),required:!0}),e.jsx("button",{type:"submit",children:"Submit"}),g&&e.jsx("p",{className:"error",children:g})]})]})]})};export{H as default};
