import{u as J,r,j as e,L as z}from"./index-CEwMMO6D.js";import F from"./SideBar-C1-efNho.js";import{N as G}from"./NavBar-DkS9Kew_.js";import{s as v}from"./SupaBase-DdafNSpo.js";import{E as I}from"./Edit-D7SR9c48.js";import{D as T}from"./Delete-BNWQAeSV.js";import"./Close-MmRdREOg.js";import"./createSvgIcon-ksZbkFwt.js";import"./react-toastify.esm-CPfoCFDA.js";/* empty css                      *//* empty css               */const Y=()=>{const b=J(),[h,p]=r.useState(null),[m,y]=r.useState([]),[i,P]=r.useState(1),[c,f]=r.useState("created_at"),[d,D]=r.useState(""),[x,g]=r.useState(!1),[l,w]=r.useState(""),j=5,N=async()=>{g(!0);const{data:t,error:s}=await v.from("patientsdata").select("*");if(g(!1),s)p("Could not fetch data"),console.error("Error fetching patients:",s);else{let n=t;d&&(n=n.filter(a=>a.doctor_name.toLowerCase().includes(d.toLowerCase()))),l&&(n=n.filter(a=>a.joining_date===l)),c==="Status"?n.sort((a,o)=>["emergency","normal"].indexOf(a.Status.toLowerCase())-["emergency","normal"].indexOf(o.Status.toLowerCase())):c==="created_at"?n.sort((a,o)=>new Date(o.created_at)-new Date(a.created_at)):n.sort((a,o)=>{var S;return(S=a[c])==null?void 0:S.localeCompare(o[c])}),y(n),p(null)}};r.useEffect(()=>{N()},[c,d,l]);const _=m.length,L=Math.ceil(_/j),C=i*j,E=C-j,k=m.slice(E,C),u=t=>{t>=1&&t<=L&&P(t)},O=t=>{switch(t==null?void 0:t.toLowerCase()){case"emergency":return"status-emergency";case"normal":return"status-normal";default:return""}},A=async t=>{if(window.confirm("Are you sure you want to delete this patient?")){const{error:s}=await v.from("patientsdata").delete().eq("id",t);s?console.error("Error deleting patient:",s):N()}},B=()=>{b("/patients/new")};return e.jsxs("div",{className:"patientsData",children:[e.jsx(F,{}),e.jsxs("div",{className:"patientContainer",children:[e.jsx(G,{}),e.jsxs("div",{className:"datatable",children:[e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"addpatientbtn",onClick:B,children:"Add a Patient"}),e.jsxs("div",{className:"inputfields",children:[e.jsx("div",{className:"inputfield",children:e.jsx("input",{className:"inputsearch",type:"date",placeholder:"Search by Joining Date",value:l,onChange:t=>w(t.target.value)})}),e.jsx("div",{className:"inputfield",children:e.jsx("input",{className:"inputsearch inputsearch1 ",type:"text",placeholder:"Search by Doctor Name",value:d,onChange:t=>D(t.target.value)})})]}),e.jsxs("div",{className:"sort-options",children:[e.jsx("button",{className:"created_attbtn",onClick:()=>f("created_at"),children:"Order by Created At"}),e.jsx("button",{className:"doctor_namebtn",onClick:()=>f("doctor_name"),children:"Order by Doctor Name"})]})]}),h&&e.jsx("p",{className:"error",children:h}),x&&e.jsx("p",{children:"Loading patients..."}),!h&&!x&&m.length>0?e.jsxs("table",{className:"patient-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Doctor Name"}),e.jsx("th",{children:"Patient Name"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Disease"}),e.jsx("th",{children:"Joining Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Specialization"}),e.jsx("th",{children:"Consultation No."}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:k.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.doctor_name}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.Gender}),e.jsx("td",{children:t.disease}),e.jsx("td",{children:t.joining_date}),e.jsx("td",{className:O(t.Status),children:t.Status}),e.jsx("td",{children:t.specialization}),e.jsx("td",{children:t.consultation_number}),e.jsxs("td",{children:[e.jsxs("td",{className:"edit",children:[" ",e.jsx(z,{to:`/patients/edit/${t.id}`,children:e.jsx(I,{})})]}),e.jsxs("td",{className:"edit",children:["  ",e.jsx(T,{onClick:()=>A(t.id)})]})]})]},t.id))})]}):!x&&e.jsx("p",{children:"No patients found."}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>u(i-1),children:"Prev"}),Array.from({length:1},(t,s)=>e.jsx("div",{children:e.jsx("button",{className:`pagination-button ${i===s+1?"active":""}`,onClick:()=>u(s+1),children:i})},s)),e.jsx("button",{onClick:()=>u(i+1),children:"Next"})]})]})]})]})};export{Y as default};
